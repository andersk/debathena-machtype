/*
 * $Id: Imakefile,v 1.12 1995-07-31 23:34:31 cfields Exp $
 */

#ifdef ULTRIX40
DEFINES=-DULTRIX_40 -I/usr/include/sys 
#endif

ATHSYS=`fs sysname | awk -F\' '{ print $$2 }'`

#if defined(_IBMR2)
#define DONE
machtype_rios.o: $(ATHVERS) machtype_rios.c
	$(RM) $@
	. $(ATHVERS); \
	$(CC) -c $(CFLAGS) -DATHMAJV=\"$$ATHMAJV\" -DATHMINV=\"$$ATHMINV\" \
	-DATHSYS=\"${ATHSYS}\" $*.c

SimpleProgram(machtype, machtype_rios.o,-lodm -lcfg -ldiag,$(ATHRBINDIR))
#endif
#if defined(SOLARIS)
#define DONE
machtype_sol.o: $(ATHVERS) machtype_sol.c
        $(RM) $@
        . $(ATHVERS); \
        $(CC) -c $(CFLAGS) -DATHMAJV=\"$$ATHMAJV\" -DATHMINV=\"$$ATHMINV\" \
	-DATHSYS=\"${ATHSYS}\" $*.c

SimpleProgram(machtype, machtype_sol.o,-lkvm,$(ATHRBINDIR))
install_program(machtype,-m 4755 -o root,$(ATHRBINDIR))
#endif
#if defined(sgi)
#define DONE
machtype_sgi.o: $(ATHVERS) machtype_sgi.c
	$(RM) $@
	. $(ATHVERS); \
	$(CC) -c $(CFLAGS) -DATHMAJV=\"$$ATHMAJV\" -DATHMINV=\"$$ATHMINV\" \
	-DATHSYS=\"${ATHSYS}\" $*.c
SimpleProgram(machtype, machtype_sgi.o,-lmld,$(ATHRBINDIR))
install_program(machtype,-m 4755 -o root,$(ATHRBINDIR))
#endif
#ifndef DONE
machtype_std.o: $(ATHVERS) machtype_std.c
	$(RM) $@
	. $(ATHVERS); \
	$(CC) -c $(CFLAGS) -DATHMAJV=\"$$ATHMAJV\" -DATHMINV=\"$$ATHMINV\" \
	-DATHSYS=\"${ATHSYS}\" $*.c
	
build_program(machtype, machtype_std.o,,)
install_program(machtype,-m 2755 -g kmem,$(ATHRBINDIR))
#endif

install_man(machtype.1,machtype.1)
